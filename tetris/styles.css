* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    position: relative;
    overflow: hidden;
}

/* Rotating Snakes Optical Illusion Background */
body::before {
    content: '';
    position: fixed;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: 
        radial-gradient(circle at 20% 20%, #ff6b6b 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, #4ecdc4 0%, transparent 50%),
        radial-gradient(circle at 20% 80%, #45b7d1 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, #96ceb4 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, #feca57 0%, transparent 50%);
    animation: rotateBackground 20s linear infinite;
    opacity: 0.1;
    z-index: -1;
}

@keyframes rotateBackground {
    0% { transform: rotate(0deg) scale(1); }
    25% { transform: rotate(-90deg) scale(1.1); }
    50% { transform: rotate(-180deg) scale(1); }
    75% { transform: rotate(-270deg) scale(1.1); }
    100% { transform: rotate(-360deg) scale(1); }
}

.game-container {
    background: rgba(0, 0, 0, 0.8);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    max-width: 1200px;
    width: 100%;
}

.header {
    text-align: center;
    margin-bottom: 20px;
}

.header h1 {
    font-size: 2.5em;
    margin-bottom: 15px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.controls {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
}

.controls button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: #4CAF50;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.controls button:hover {
    background: #45a049;
    transform: translateY(-2px);
}

.controls button:disabled {
    background: #666;
    cursor: not-allowed;
    transform: none;
}

.game-area {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
}

.single-game {
    display: flex;
    gap: 20px;
    align-items: flex-start;
}

.game-info {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.info-panel {
    background: rgba(255, 255, 255, 0.1);
    padding: 15px;
    border-radius: 8px;
    min-width: 150px;
}

.info-panel div {
    margin-bottom: 8px;
    font-size: 18px;
    font-weight: bold;
}

.next-pieces {
    background: rgba(255, 255, 255, 0.1);
    padding: 15px;
    border-radius: 8px;
    text-align: center;
}

.next-label {
    font-size: 16px;
    margin-bottom: 10px;
    font-weight: bold;
}

#gameCanvas {
    border: 3px solid #fff;
    border-radius: 8px;
    background: #000;
}

#nextCanvas {
    border: 2px solid #fff;
    border-radius: 8px;
    background: #000;
}

/* Multi-game layout */
.multi-game {
    width: 100%;
}

.multi-info {
    text-align: center;
    margin-bottom: 20px;
    font-size: 20px;
    font-weight: bold;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
}

#rotationBtn {
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    background: #ff6b6b;
    color: white;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

#rotationBtn:hover {
    background: #ff5252;
    transform: translateY(-1px);
}

.game-grid {
    position: relative;
    width: 100vw;
    height: 100vh;
    margin: 0 auto;
    transform-origin: center center;
    transition: transform 0.5s ease-in-out;
    display: flex;
    justify-content: center;
    align-items: center;
}

.game-grid.rotating {
    animation: rotateGrid 10s linear infinite;
}

/* Optical Illusion: Motion Aftereffect */
.game-grid.rotating::before {
    content: '';
    position: absolute;
    top: -20px;
    left: -20px;
    right: -20px;
    bottom: -20px;
    background: 
        conic-gradient(from 0deg, 
            transparent 0deg, 
            rgba(255, 255, 255, 0.1) 30deg, 
            transparent 60deg,
            rgba(255, 255, 255, 0.1) 90deg,
            transparent 120deg,
            rgba(255, 255, 255, 0.1) 150deg,
            transparent 180deg,
            rgba(255, 255, 255, 0.1) 210deg,
            transparent 240deg,
            rgba(255, 255, 255, 0.1) 270deg,
            transparent 300deg,
            rgba(255, 255, 255, 0.1) 330deg,
            transparent 360deg
        );
    animation: counterRotate 10s linear infinite reverse;
    border-radius: 50%;
    z-index: -1;
}

@keyframes counterRotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes rotateGrid {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.center-point {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 10px;
    height: 10px;
    transform: translate(-50%, -50%);
    background: #080707;
    border-radius: 50%;
    border: 2px solid #fff;
    z-index: 10;
}

.game-quadrant {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* Top field - positioned above center, no rotation */
.game-quadrant.top {
    top: calc(50% - 75px - 300px); /* 5 fields (75px) + game height (300px) above center */
    left: 50%;
    transform: translateX(-50%);
}

/* Bottom field - positioned below center, rotated 180° */
.game-quadrant.bottom {
    top: calc(50% + 75px); /* 5 fields (75px) below center */
    left: 50%;
    transform: translateX(-50%) rotate(180deg);
}

/* Left field - positioned to the left of center, rotated 270° */
.game-quadrant.left {
    left: calc(50% - 75px - 300px); /* 5 fields (75px) + game height (300px) left of center */
    top: 50%;
    transform: translateY(-50%) rotate(270deg);
}

/* Right field - positioned to the right of center, rotated 90° */
.game-quadrant.right {
    left: calc(50% + 75px); /* 5 fields (75px) right of center */
    top: 50%;
    transform: translateY(-50%) rotate(90deg);
}

.game-quadrant canvas {
    border: 2px solid #fff;
    border-radius: 8px;
    background: #000;
    transition: all 0.3s ease;
}

/* Optical Illusion: Pulsating Border */
.game-quadrant canvas:hover {
    box-shadow: 
        0 0 20px rgba(255, 255, 255, 0.5),
        0 0 40px rgba(255, 255, 255, 0.3),
        0 0 60px rgba(255, 255, 255, 0.1);
    animation: pulseGlow 2s ease-in-out infinite;
}

@keyframes pulseGlow {
    0%, 100% { 
        box-shadow: 
            0 0 20px rgba(255, 255, 255, 0.5),
            0 0 40px rgba(255, 255, 255, 0.3),
            0 0 60px rgba(255, 255, 255, 0.1);
    }
    50% { 
        box-shadow: 
            0 0 30px rgba(255, 255, 255, 0.8),
            0 0 60px rgba(255, 255, 255, 0.5),
            0 0 90px rgba(255, 255, 255, 0.2);
    }
}

/* External scores positioned outside the game area */
.external-scores {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.score-panel {
    position: absolute;
    background: rgba(0, 0, 0, 0.8);
    padding: 10px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: bold;
    color: white;
    border: 2px solid #fff;
}

.score-panel.top-score {
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
}

.score-panel.bottom-score {
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
}

.score-panel.left-score {
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
}

.score-panel.right-score {
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
}

.quadrant-info {
    background: rgba(255, 255, 255, 0.1);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    text-align: center;
}

.quadrant-info div {
    margin-bottom: 4px;
}

/* Game Over Screen */
.game-over {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.game-over-content {
    background: rgba(255, 255, 255, 0.1);
    padding: 40px;
    border-radius: 15px;
    text-align: center;
    backdrop-filter: blur(10px);
}

.game-over-content h2 {
    font-size: 3em;
    margin-bottom: 20px;
    color: #ff6b6b;
}

.final-score {
    font-size: 1.5em;
    margin-bottom: 30px;
}

#restartBtn {
    padding: 15px 30px;
    font-size: 18px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

#restartBtn:hover {
    background: #45a049;
    transform: translateY(-2px);
}

/* Controls Info */
.controls-info {
    margin-top: 20px;
    text-align: center;
}

.controls-info h3 {
    margin-bottom: 10px;
    font-size: 1.2em;
}

.control-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
    font-size: 14px;
    opacity: 0.8;
}

.control-list div {
    background: rgba(255, 255, 255, 0.1);
    padding: 8px 12px;
    border-radius: 6px;
}

/* 3D Mode Styles */
.game-3d {
    display: flex;
    gap: 20px;
    align-items: flex-start;
}

.game-3d canvas {
    border: 3px solid #fff;
    border-radius: 8px;
    background: #000;
}

.rotation-info {
    background: rgba(255, 255, 255, 0.1);
    padding: 15px;
    border-radius: 8px;
    margin-top: 15px;
}

.rotation-label {
    font-size: 16px;
    margin-bottom: 10px;
    font-weight: bold;
}

.rotation-controls div {
    margin-bottom: 5px;
    font-size: 14px;
    opacity: 0.8;
}

/* Responsive Design */
@media (max-width: 768px) {
    .game-container {
        padding: 10px;
        margin: 10px;
    }
    
    .single-game {
        flex-direction: column;
        align-items: center;
    }
    
    .game-grid {
        grid-template-areas: 
            "top"
            "left"
            "right"
            "bottom";
        grid-template-columns: 1fr;
        grid-template-rows: repeat(4, 1fr);
    }
    
    .game-quadrant canvas {
        width: 150px;
        height: 300px;
    }
    
    #gameCanvas {
        width: 250px;
        height: 500px;
    }
}
